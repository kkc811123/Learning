#!MANAGED-CONFIG https://your-config-url.com/surge.conf interval=86400 strict=false

[General]
# é€šç”¨è®¾ç½®
loglevel = notify
internet-test-url = http://www.baidu.com
proxy-test-url = http://www.google.com/generate_204
test-timeout = 3
ipv6 = true
ipv6-vif = auto

# DNSè®¾ç½®
dns-server = 223.5.5.5, 119.29.29.29, system
encrypted-dns-server = https://dns.alidns.com/dns-query
doh-skip-cert-verification = false
doh-format = json

# é«˜çº§è®¾ç½®
allow-wifi-access = true
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0:6152
socks5-listen = 0.0.0.0:6153

# å…¼å®¹æ€§
compatibility-mode = false
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, passenger.t3go.cn
bypass-tun = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12

# å®éªŒæ€§åŠŸèƒ½
network-framework = false
exclude-simple-hostnames = true
show-error-page-for-reject = true

# æ–°ç‰ˆæœ¬åŠŸèƒ½
block-quic = false
include-all-networks = false
include-local-networks = false

[Replica]
# æŠ“åŒ…è®¾ç½®
hide-apple-request = true
hide-crash-reporter-request = true
hide-udp = false
keyword-filter-type = false

[Proxy]
# ä»£ç†æœåŠ¡å™¨é…ç½®ç¤ºä¾‹
# è¯·æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„ä»£ç†æœåŠ¡å™¨ä¿¡æ¯

# Shadowsocks ç¤ºä¾‹
ğŸ‡ºğŸ‡¸ US Server = ss, your-server.com, 443, encrypt-method=aes-256-gcm, password=your-password
ğŸ‡­ğŸ‡° HK Server = ss, hk-server.com, 443, encrypt-method=aes-256-gcm, password=your-password

# Trojan ç¤ºä¾‹
ğŸ‡¯ğŸ‡µ JP Server = trojan, jp-server.com, 443, password=your-password, sni=jp-server.com

# HTTP/HTTPS ç¤ºä¾‹
ğŸ‡¸ğŸ‡¬ SG Server = http, sg-server.com, 80, username, password

# SOCKS5 ç¤ºä¾‹
ğŸ‡¬ğŸ‡§ UK Server = socks5, uk-server.com, 1080, username, password

[Proxy Group]
# ä»£ç†ç­–ç•¥ç»„
ğŸš€ èŠ‚ç‚¹é€‰æ‹© = select, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡ºğŸ‡¸ US Server, ğŸ‡­ğŸ‡° HK Server, ğŸ‡¯ğŸ‡µ JP Server, ğŸ‡¸ğŸ‡¬ SG Server, ğŸ‡¬ğŸ‡§ UK Server, DIRECT

â™»ï¸ è‡ªåŠ¨é€‰æ‹© = url-test, ğŸ‡ºğŸ‡¸ US Server, ğŸ‡­ğŸ‡° HK Server, ğŸ‡¯ğŸ‡µ JP Server, ğŸ‡¸ğŸ‡¬ SG Server, ğŸ‡¬ğŸ‡§ UK Server, url=http://www.google.com/generate_204, interval=300, tolerance=50

ğŸ¯ å…¨çƒç›´è¿ = select, DIRECT

ğŸ›‘ å¹¿å‘Šæ‹¦æˆª = select, REJECT, DIRECT

ğŸƒ åº”ç”¨å‡€åŒ– = select, REJECT, DIRECT

ğŸ“¢ è°·æ­ŒFCM = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

ğŸ“² ç”µæŠ¥æ¶ˆæ¯ = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, DIRECT

ğŸ’¬ OpenAI = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡¸ US Server

ğŸµ ç½‘æ˜“éŸ³ä¹ = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

ğŸ¬ å¥ˆé£è§†é¢‘ = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡ºğŸ‡¸ US Server, ğŸ‡­ğŸ‡° HK Server, ğŸ‡¯ğŸ‡µ JP Server, ğŸ‡¸ğŸ‡¬ SG Server, ğŸ‡¬ğŸ‡§ UK Server

ğŸ“º å·´å“ˆå§†ç‰¹ = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° HK Server

ğŸ“º å“”å“©å“”å“© = select, DIRECT, ğŸ‡­ğŸ‡° HK Server

ğŸŒ å›½å¤–åª’ä½“ = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, DIRECT

ğŸŒ å›½å†…åª’ä½“ = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

â“‚ï¸ å¾®è½¯äº‘ç›˜ = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

â“‚ï¸ å¾®è½¯æœåŠ¡ = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

ğŸ è‹¹æœæœåŠ¡ = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

ğŸ® æ¸¸æˆå¹³å° = select, DIRECT, ğŸš€ èŠ‚ç‚¹é€‰æ‹©

ğŸŸ æ¼ç½‘ä¹‹é±¼ = select, ğŸš€ èŠ‚ç‚¹é€‰æ‹©, DIRECT, â™»ï¸ è‡ªåŠ¨é€‰æ‹©

[Rule]
# è§„åˆ™é›†é…ç½®
# æœ¬åœ°ç½‘ç»œç›´è¿
RULE-SET,SYSTEM,DIRECT

# å¹¿å‘Šæ‹¦æˆª
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª

# éšç§ä¿æŠ¤
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy.list,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª

# åº”ç”¨å‡€åŒ–
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,ğŸƒ åº”ç”¨å‡€åŒ–

# è°·æ­ŒFCM
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleFCM/GoogleFCM.list,ğŸ“¢ è°·æ­ŒFCM

# Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list,ğŸ“² ç”µæŠ¥æ¶ˆæ¯

# OpenAI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OpenAI/OpenAI.list,ğŸ’¬ OpenAI

# ç½‘æ˜“äº‘éŸ³ä¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/NetEaseMusic/NetEaseMusic.list,ğŸµ ç½‘æ˜“éŸ³ä¹

# Netflix
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,ğŸ¬ å¥ˆé£è§†é¢‘

# å·´å“ˆå§†ç‰¹
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Bahamut/Bahamut.list,ğŸ“º å·´å“ˆå§†ç‰¹

# å“”å“©å“”å“©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BiliBili/BiliBili.list,ğŸ“º å“”å“©å“”å“©

# å›½å¤–åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,ğŸŒ å›½å¤–åª’ä½“

# å›½å†…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,ğŸŒ å›½å†…åª’ä½“

# å¾®è½¯äº‘ç›˜
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,â“‚ï¸ å¾®è½¯äº‘ç›˜

# å¾®è½¯æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,â“‚ï¸ å¾®è½¯æœåŠ¡

# è‹¹æœæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,ğŸ è‹¹æœæœåŠ¡

# æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/Game.list,ğŸ® æ¸¸æˆå¹³å°

# å…¨çƒåŠ é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy.list,ğŸš€ èŠ‚ç‚¹é€‰æ‹©

# å…¨çƒç›´è¿
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,ğŸ¯ å…¨çƒç›´è¿

# ä¸­å›½ç›´è¿
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list,ğŸ¯ å…¨çƒç›´è¿

# Local Area Network å±€åŸŸç½‘
RULE-SET,LAN,DIRECT

# GeoIP China ä¸­å›½
GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿

# æ¼ç½‘ä¹‹é±¼
FINAL,ğŸŸ æ¼ç½‘ä¹‹é±¼,dns-failed

[Host]
# DNSæ˜ å°„
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alipay.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.weixin.com = server:119.28.28.28
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.google.com = server:8.8.8.8
*.youtube.com = server:8.8.8.8
*.facebook.com = server:1.1.1.1
*.twitter.com = server:1.1.1.1

[URL Rewrite]
# URLé‡å†™è§„åˆ™
# é˜»æ­¢google.com è·³è½¬åˆ°google.com.hk
^https?:\/\/(www\.)?g\.cn https://www.google.com 302
^https?:\/\/(www\.)?google\.cn https://www.google.com 302

# çŸ¥ä¹å»å¹¿å‘Š
^https://api\.zhihu\.com/(ad|drama|fringe|commercial|market/popover|search/(top|preset|tab)|.*featured-comment-ad) - reject-200

[Script]
# è„šæœ¬è§„åˆ™
# çŸ¥ä¹å»å¹¿å‘Šè„šæœ¬
çŸ¥ä¹å»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=https://api\.zhihu\.com/(topstory/recommend|homepage/recommend),script-path=https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_plus.js

# å¾®åšå»å¹¿å‘Šè„šæœ¬
å¾®åšå»å¹¿å‘Š = type=http-response,requires-body=1,max-size=0,pattern=^https?://m?api\.weibo\.c(n|om)/(2\/(profile\/statuses|groups\/timeline|statuses/(unread|extend|positives\/get|(friends|video)(/|_)(mix)?timeline)|stories/(video_stream|home_list)|(groups|fangle)/timeline|profile/statuses|comments/build_comments|photo/recommend_list|service/picfeed|searchall|cardlist|page|!/photos/pic_recommend_status|video/tiny_stream_video_list|photo/info)|p/searchall),script-path=https://raw.githubusercontent.com/yichahucha/surge/master/wb_ad.js

[Header Rewrite]
# HTTPè¯·æ±‚å¤´é‡å†™
^https?://.*\.iqiyi\.com/.* header-add X-Forwarded-For 1.1.1.1

[MITM]
# HTTPSè§£å¯†è®¾ç½®
hostname = *.google.cn, *.google.com.hk, www.zhihu.com, api.zhihu.com, *.iqiyi.com, api.weibo.cn, mapi.weibo.com, *.uve.weibo.com

# è·³è¿‡æœåŠ¡ç«¯è¯ä¹¦éªŒè¯
skip-server-cert-verify = false

# MITM over HTTP/2
h2 = true

# è¯ä¹¦ç”Ÿæˆå™¨
ca-passphrase = Surge
ca-p12 = [è¯ä¹¦å†…å®¹éœ€è¦åœ¨Surgeä¸­ç”Ÿæˆ]
